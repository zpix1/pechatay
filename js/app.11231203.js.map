{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/SchemeEntry.vue?8eab","webpack:///./src/App.vue","webpack:///./src/views/Settings.vue","webpack:///./src/views/Settings.vue?e8e9","webpack:///./src/App.vue?dfb6","webpack:///./src/views/TyperMenu.vue","webpack:///./src/components/Typer.vue","webpack:///./src/components/KeygetterVisible.vue","webpack:///./src/lib/constants.js","webpack:///./src/lib/utils.js","webpack:///./src/components/KeygetterVisible.vue?a03e","webpack:///./src/components/KeygetterHidden.vue","webpack:///./src/components/KeygetterHidden.vue?12f1","webpack:///./src/components/Typer.vue?5fb1","webpack:///./src/views/TyperMenu.vue?ebe1","webpack:///./src/views/BookSelect.vue","webpack:///./src/components/SchemeEntry.vue","webpack:///./src/components/SchemeEntry.vue?d7d6","webpack:///./src/views/BookSelect.vue?0da5","webpack:///./src/views/OnlineTyperMenu.vue","webpack:///./src/components/OnlineTyper.vue","webpack:///./src/components/OnlineTyper.vue?dfc8","webpack:///./src/views/OnlineTyperMenu.vue?86f5","webpack:///./src/views/About.vue","webpack:///./src/views/About.vue?008a","webpack:///./src/router/index.js","webpack:///./src/lib/database.js","webpack:///./src/main.js","webpack:///./src/views/Settings.vue?b36c","webpack:///./src/App.vue?2cc1","webpack:///./vue.config.js","webpack:///./src/views/BookSelect.vue?28f6","webpack:///./src/views/TyperMenu.vue?babe","webpack:///./src/components/Typer.vue?c0c9","webpack:///./src/App.vue?e2de","webpack:///./src/components/OnlineTyper.vue?99ed","webpack:///./src/views/About.vue?26b2","webpack:///./src/views/OnlineTyperMenu.vue?1337"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","style","cssVars","modal","settings","$store","state","loading","to","$route","path","ref","outsideClick","$emit","settingsTemplate","theme","v","commit","font","typeMode","type","username","props","Boolean","this","emits","methods","event","target","$refs","watch","setting","render","__scopeId","beforeCreate","computed","both","darkTheme","lightTheme","components","Settings","book","text","title","author","updateUserData","user-data","userData","update","finished","totalErrors","totalLetters","toFixed","hideTime","getWPM","totalMs","restartBook","parentSet","index","parent","items","id","pos","paragraph","paragraphLength","wpm","currentMs","textArray","letterEntry","letter","convertLetter","stats","clearHook","addLetter","removeLetter","contenteditable","placeChanged","filterKeypress","filterMouse","onselect","oncut","onpaste","LETTERS_IN_WORD","findParent","scheme","res","placeCaretAtEnd","el","focus","getSelection","document","createRange","range","selectNodeContents","collapse","sel","removeAllRanges","addRange","body","createTextRange","textRange","moveToElementText","select","randomName","characters","charactersLength","charAt","Math","floor","random","Number","editable","preventDefault","includes","ctrlKey","metaKey","inputType","innerText","listener","mounted","addEventListener","unmounted","removeEventListener","Array","KeygetterVisible","KeygetterHidden","totalParagraphs","startTime","updateTimeIntervalId","updateTextArray","emitUpdateUserData","finishText","updateTime","Date","addParagraph","filter","e","setInterval","clearInterval","Typer","db","getBook","params","getBookText","then","getScheme","setBook","currentBook","set","element","SchemeEntry","isState","error","requestNewSession","userCustomText","userText","sessionInfo","prepareStartCountdown","isAdmin","sendPrepareStart","keys","playersPos","playerId","userId","id2username","finishBefore","sendPlayerPos","dummy","blocked","players-pos","winners","winner","results","wpmWithFine","convertDummy","player","getPlayerByPos","data-text","mixins","String","getLetterOffsetClass","split","toLowerCase","toUpperCase","startCountdown","OnlineTyper","sessionId","socket","startsWith","emit","response","$router","requestInitiation","console","log","init","prepareStart","positionData","sendFinishEvent","intervalCode","start","created","on","disconnect","playersList","routes","component","BookSelect","TyperMenu","OnlineTyperMenu","About","redirect","router","createRouter","history","createWebHashHistory","publicPath","Database","id2book","generateId2book","userBook","Promise","resolve","reject","setTimeout","fetch","json","request","indexedDB","open","dbName","version","onerror","alert","onsuccess","localStorage","getItem","localStorageSchemeKey","JSON","stringify","other","tr","transaction","bookTexts","objectStore","put","setItem","onupgradeneeded","objectStoreNames","contains","createObjectStore","keyPath","parse","localStorageSettingsKeyPrefix","localStorageBookKeyPrefix","books","app","createApp","App","store","createStore","mutations","k","getSettingsValue","userRes","isArray","setCurrentBook","setSettingsValue","setSetting","use","mount"],"mappings":"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","file":"js/app.11231203.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/pechatay/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SchemeEntry.vue?vue&type=style&index=0&id=8203cee2&scoped=true&lang=css\"","<template>\n  <div class=\"pseudobody\" :style=\"cssVars\">\n    <div class=\"big-container\">\n      <Settings :modal=\"settings\" @close=\"settings = false\"/>\n      <div v-if=\"!$store.state.loading\">\n        <div class=\"head\">\n          <span class=\"header\">⌨️ Pechatay</span>\n\n          <router-link class=\"g-text-button head-link\" to=\"/\">📒 Book select</router-link>\n\n          <router-link class=\"g-text-button head-link\" to=\"/fight/new\"\n          >⚔ Fight online\n          </router-link\n          >\n\n          <a :class=\"{ 'head-link':true, 'g-text-button': true, 'router-link-active': settings }\"\n             @click=\"settings = true\">\n            ⚙️ Settings\n          </a>\n\n          <router-link class=\"g-text-button head-link\" to=\"/about\">❔ About</router-link>\n        </div>\n        <router-view :key=\"$route.path\" class=\"container\"/>\n      </div>\n      <div v-else>Loading database...</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Settings from \"@/views/Settings\";\n\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      settings: false,\n    };\n  },\n  beforeCreate() {\n    this.$store.commit(\"init\");\n  },\n  computed: {\n    cssVars() {\n      let both = {\n        \"--typing-font\": this.$store.state.settings.font,\n      };\n      let darkTheme = {\n        \"--main-color\": \"black\",\n        \"--font-color\": \"white\",\n        \"--correct-char-color\": \"gray\"\n      };\n      let lightTheme = {\n        \"--main-color\": \"white\",\n        \"--font-color\": \"black\",\n        \"--correct-char-color\": \"blue\"\n      };\n      if (this.$store.state.settings.theme === \"Light\") {\n        return {...both, ...lightTheme};\n      } else {\n        return {...both, ...darkTheme};\n      }\n    },\n  },\n  components: {\n    Settings,\n  },\n};\n</script>\n\n<style>\n@import \"./assets/main.css\";\n</style>\n\n<style scoped>\n.pseudobody {\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n}\n\n.container {\n  max-width: 700px;\n  margin: 15px auto;\n}\n\n.big-container {\n  max-width: 800px;\n  margin: 15px auto;\n}\n\n.head {\n  border-radius: 3px;\n  max-width: 800px;\n  margin: 15px auto 30px auto;\n  font-size: 1.3em;\n}\n\n.header {\n  font-size: 1.7em;\n  margin-right: 30px;\n}\n\n.head a.router-link-active {\n  text-decoration: underline;\n  user-focus: none;\n  outline: 0;\n}\n\na, .header {\n  user-select: none;\n}\n\na:hover, a:active, a:focus {\n  outline: 0;\n}\n\n.head-link {\n  margin-left: 20px;\n}\n</style>","<template>\n  <div v-if=\"modal\" @click=\"outsideClick\">\n    <div class=\"modal\" ref=\"modal\">\n      <div class=\"modal-content\">\n        <span class=\"close\" @click=\"$emit('close')\">&times;</span>\n        <div class=\"g-header\">Settings</div>\n\n        <div class=\"g-subtitle\">Theme</div>\n        <div class=\"select-div\">\n          <div v-for=\"v in $store.state.settingsTemplate.theme\" :key=\"v\">\n          <span\n            :class=\"{ 'g-text-button': true, 'select-option': true, 'active-setting': $store.state.settings.theme === v }\"\n            @click=\"$store.commit('setSetting', {setting: 'theme', value: v})\"\n          >{{ v }}</span>\n          </div>\n        </div>\n\n        <div class=\"g-subtitle\">Typer font</div>\n        <div class=\"select-div\">\n          <div v-for=\"v in $store.state.settingsTemplate.font\" :key=\"v\">\n            <span\n              :class=\"{ 'g-text-button': true, 'select-option': true, 'active-setting': $store.state.settings.font === v }\"\n              @click=\"$store.commit('setSetting', {setting: 'font', value: v})\"\n            >{{ v }}</span>\n          </div>\n        </div>\n\n        <p class=\"g-typing\">Алая вспышка осветила силуэт зазубренного крыла.&para;<br>New line enlish text\n        </p>\n\n        <div class=\"g-subtitle\">Type mode</div>\n        <div class=\"select-div\">\n          <div v-for=\"v in $store.state.settingsTemplate.typeMode\" :key=\"v\">\n            <span\n              :class=\"{ 'g-text-button': true, 'select-option': true, 'active-setting': $store.state.settings.typeMode === v }\"\n              @click=\"$store.commit('setSetting', {setting: 'typeMode', value: v})\"\n            >{{ v }}</span>\n          </div>\n        </div>\n\n        <div class=\"g-subtitle\">Fight mode nickname</div>\n        <span style=\"display: flex\"><input style=\"width: 100%;\" class=\"select-div\" type=\"text\" v-model=\"username\"/></span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Settings\",\n  props: {\n    modal: Boolean,\n  },\n  data() {\n    return {\n      username: this.$store.state.settings.username\n    };\n  },\n  emits: [\"close\"],\n  methods: {\n    outsideClick(event) {\n      if (event.target === this.$refs.modal) {\n        this.$emit(\"close\");\n      }\n    }\n  },\n  watch: {\n    username(value) {\n      this.$store.commit(\"setSetting\", {setting: \"username\", value: value});\n    }\n  }\n};\n</script>\n\n<style scoped>\n.modal {\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.modal-content {\n  background-color: var(--main-color);\n  border: 1px solid var(--font-color);\n  /*margin-top: min(150px, 15%);*/\n  margin: min(150px, 10vh) auto;\n  padding: 20px;\n  border-radius: 3px;\n  max-width: 600px;\n}\n\n.close {\n  color: #aaaaaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n}\n\n.close:hover,\n.close:focus {\n  color: black;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.select-div {\n  border: 1px solid var(--font-color);\n  padding: 5px;\n  border-radius: 3px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n\n.select-option {\n  /* user-select: none; */\n}\n\n.active-setting {\n  text-decoration: underline;\n}\n</style>","import { render } from \"./Settings.vue?vue&type=template&id=5bc77e7d&scoped=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=js\"\nexport * from \"./Settings.vue?vue&type=script&lang=js\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=5bc77e7d&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5bc77e7d\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=f60b4cd4&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=f60b4cd4&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=f60b4cd4&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-f60b4cd4\"\n\nexport default script","<template>\n  <div>\n    <div v-if=\"book && text\">\n      <div class=\"g-header\">{{ book.title || '' }}</div>\n      <div class=\"g-subtitle\" v-if=\"book.author.length !== 0\">{{ book.author }}</div>\n      <Typer\n          @update-user-data=\"updateUserData\"\n          :user-data=\"book.userData\"\n          :text=\"text\"\n          :key=\"update\"\n      />\n      <div v-if=\"book.userData.finished\" class=\"finished\">\n        <div class=\"result\">\n          You finished with {{ book.userData.totalErrors }}\n          errors out of {{ book.userData.totalLetters }}\n          letters ({{ (book.userData.totalErrors * 100 / book.userData.totalLetters).toFixed(2) }}%).\n          <span v-if=\"hideTime\" @click=\"hideTime = false\" class=\"g-text-button\">Time result hidden.</span>\n          <span v-else @click=\"hideTime = true\" class=\"g-text-button\">Mean wpm: {{ getWPM(book.userData.totalMs, book.userData.totalLetters).toFixed(1) }}. Time: {{ (book.userData.totalMs / 1000).toFixed(1) }}.</span>\n        </div>\n        <span class=\"g-button\" @click=\"restartBook\">Type again?</span>\n        <div v-if=\"parentSet\" class=\"footer\">\n          <router-link class=\"prev-chapter g-button\"\n                       :to=\"{ name: 'TyperMenu', params: { id: parentSet.parent.items[parentSet.index - 1].id } }\"\n                       v-if=\"parentSet.index - 1 >= 0\">\n            Prev: {{ parentSet.parent.items[parentSet.index - 1].title }}\n          </router-link>\n          <router-link class=\"next-chapter g-button\"\n                       :to=\"{ name: 'TyperMenu', params: { id: parentSet.parent.items[parentSet.index + 1].id } }\"\n                       v-if=\"parentSet.index + 1 < parentSet.parent.items.length\">\n            Next: {{ parentSet.parent.items[parentSet.index + 1].title }}\n          </router-link>\n        </div>\n      </div>\n    </div>\n    <div v-else>\n      Not found or not loaded\n    </div>\n  </div>\n</template>\n\n<script>\nimport Typer from \"@/components/Typer\";\nimport {findParent, getWPM} from \"@/lib/utils.js\";\n\nexport default {\n  name: \"TyperMenu\",\n  components: {\n    Typer\n  },\n  data() {\n    return {\n      hideTime: true,\n      book: null,\n      text: null,\n      parentSet: null,\n      update: false\n    };\n  },\n  mounted() {\n    this.book = this.$store.state.db.getBook(this.$route.params.id);\n    this.$store.commit(\"setCurrentBook\", this.book);\n    this.$store.state.db.getBookText(this.$route.params.id).then(text => {\n      this.text = text;\n    });\n    this.parentSet = findParent(this.$store.state.db.getScheme(), this.$route.params.id);\n  },\n  methods: {\n    getWPM: getWPM,\n    updateUserData(data) {\n      this.book.userData = data;\n      this.$store.state.db.setBook(this.book.id, this.book);\n      if (data.finished) {\n        if (this.parentSet.index + 1 < this.parentSet.parent.items.length) {\n          this.$store.commit(\"setCurrentBook\", this.parentSet.parent.items[this.parentSet.index + 1]);\n        }\n      }\n    },\n    restartBook() {\n      this.book.userData = {};\n      this.$store.state.db.setBook(this.book.id, this.book);\n      this.update = !this.update;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.book-title {\n  font-size: 25px;\n  margin-bottom: 10px;\n}\n\n.prev-chapter {\n  float: left;\n}\n\n.next-chapter {\n  float: right;\n}\n\n.finished {\n  margin-bottom: 20px;\n}\n\n.result {\n  margin-bottom: 10px;\n}\n\n.footer {\n  margin-top: 10px;\n}\n</style>\n\n\n","<template>\n  <div>\n    <div class=\"info\">\n      position: {{ pos }}, paragraph: {{ paragraph + 1 }}/{{ paragraphLength }},\n      <span v-if=\"hideTime\"\n            @click=\"hideTime = false\"\n            class=\"g-text-button\">time stats hidden</span>\n      <span v-else @click=\"hideTime = true\" class=\"g-text-button\">wpm: {{\n          wpm.toFixed(1)\n        }}, time: {{ (currentMs / 1000).toFixed(1) }}</span>\n      <!--      <span @click=\"hideTime = !hideTime\" class=\"g-text-button\">{{ hideTime ? \"show time stats\" : \"hide time stats\" }}</span><br>-->\n    </div>\n    <!-- <div class=\"typing\" v-if=\"paragaph > 0\">\n      {{ text[paragaph - 1] }}\n    </div> -->\n    <div class=\"example g-typing\">\n      <span v-for=\"(letterEntry, i) in textArray\"\n            :key=\"letterEntry.letter + i\"\n            v-html=\"convertLetter(letterEntry.letter)\"\n            :class=\"{\n              letter: true,\n              good: letterEntry.state === '+',\n              bad: letterEntry.state === '-',\n              current: letterEntry.state === 'c'\n            }\">\n      </span>\n    </div>\n    <!-- <div class=\"typing\" v-if=\"paragaph + 1 < text.length\">\n      {{ text[paragaph + 1] }}\n    </div> -->\n    <div v-if=\"!stats.finished\">\n      <KeygetterVisible\n        v-if=\"mode === 'Separate window'\"\n        clearHook=\"clearHook\"\n        @add-letter=\"addLetter\"\n        @remove-letter=\"removeLetter\"\n        :finished=\"stats.finished\"\n      />\n      <KeygetterHidden\n        v-if=\"mode === 'In place'\"\n        @add-letter=\"addLetter\"\n        @remove-letter=\"removeLetter\"\n        :finished=\"stats.finished\"\n      />\n    </div>\n    <!-- <div\n      v-if=\"!this.stats.finished\"\n      contenteditable=\"true\" class=\"user-editable typing\"\n      :id=\"userEditableId\"\n      ref=\"editable\"\n      @input=\"placeChanged\"\n      @keydown=\"filterKeypress\"\n      @mousedown=\"filterMouse\"\n      onselect=\"return false;\"\n      oncut=\"return false;\"\n      onpaste=\"return false;\"\n    ></div> -->\n  </div>\n</template>\n\n<script>\nimport KeygetterVisible from \"@/components/KeygetterVisible\";\nimport KeygetterHidden from \"@/components/KeygetterHidden\";\n\nexport default {\n  name: \"Typer\",\n  props: {\n    text: Array,\n    userData: Object\n  },\n  components: {\n    KeygetterVisible,\n    KeygetterHidden\n  },\n  data() {\n    return {\n      textArray: null,\n      pos: 0,\n      paragraph: this.userData.totalParagraphs || 0,\n      paragraphLength: 0,\n\n      stats: {\n        totalMs: this.userData.totalMs || 0,\n        totalParagraphs: this.userData.totalParagraphs || 0,\n        totalLetters: this.userData.totalLetters || 0,\n        totalErrors: this.userData.totalErrors || 0,\n        finished: this.userData.finished || false\n      },\n\n      hideTime: true,\n      state: \"not-started\",\n      startTime: null,\n      currentMs: 0,\n      updateTimeIntervalId: null,\n\n      clearHook: 0\n    };\n  },\n  emits: [\"update-user-data\", \"finish\", \"position-update\"],\n  mounted() {\n    this.paragraphLength = this.text.length;\n    this.updateTextArray();\n  },\n  methods: {\n    emitUpdateUserData() {\n      this.$emit(\"update-user-data\", this.stats);\n    },\n    finishText() {\n      this.stats.finished = true;\n      this.$emit(\"finish\", this.stats);\n      this.emitUpdateUserData();\n    },\n    updateTextArray() {\n      this.textArray = [];\n      for (let i = 0; i < this.text[this.paragraph].length; i++) {\n        let letter = this.text[this.paragraph][i];\n        if (letter === \"\\n\") {\n          this.textArray.push({\n            letter: \"NEWLINE\",\n            state: \"\"\n          });\n        } else {\n          this.textArray.push({\n            letter: letter,\n            state: \"\"\n          });\n        }\n      }\n      this.textArray[0].state = \"c\";\n    },\n    updateTime() {\n      if (this.state === \"started\") {\n        this.currentMs = (new Date()) - this.startTime;\n      } else {\n        this.currentMs = this.totalMs;\n      }\n    },\n    addParagraph() {\n      this.updateTime();\n\n      this.state = \"not-started\";\n\n      this.stats.totalMs += (new Date()) - this.startTime;\n      this.stats.totalErrors += this.textArray.filter(e => e.state === \"-\").length;\n      this.stats.totalLetters += this.textArray.length;\n\n      if (this.paragraph + 1 >= this.text.length) {\n        this.finishText();\n        return;\n      }\n\n      this.paragraph++;\n      this.stats.totalParagraphs++;\n\n      this.pos = 0;\n\n      this.clearHook++;\n\n      this.updateTextArray();\n      this.emitUpdateUserData();\n    },\n    addLetter(letter) {\n      this.pos++;\n      if ((letter === this.textArray[this.pos - 1].letter) || (\n        letter === \"\\n\" && this.textArray[this.pos - 1].letter === \"NEWLINE\"\n      )) {\n        this.textArray[this.pos - 1].state = \"+\";\n      } else {\n        this.textArray[this.pos - 1].state = \"-\";\n      }\n      if (this.pos >= this.textArray.length) {\n        this.addParagraph();\n        return;\n      }\n      if (this.pos > this.textArray.length) {\n        return;\n      }\n      if (this.pos < this.textArray.length) {\n        this.textArray[this.pos].state = \"c\";\n        if (this.state === \"not-started\") {\n          this.state = \"started\";\n        }\n      }\n    },\n    removeLetter() {\n      if (this.pos <= 0) {\n        return;\n      }\n      this.pos--;\n      if (this.pos + 1 >= this.textArray.length) {\n        return;\n      }\n      this.textArray[this.pos + 1].state = \"e\";\n      this.textArray[this.pos].state = \"c\";\n    },\n    convertLetter(letter) {\n      // letter[0] to escape server side XSS\n      return letter === \"NEWLINE\" ? \"&para;\\n\" : letter[0];\n    }\n  },\n  computed: {\n    mode() {\n      return this.$store.state.settings.typeMode;\n    },\n    wpm() {\n      if (this.currentMs !== 0) {\n        return (this.pos / 5) / (this.currentMs / 1000 / 60);\n      } else {\n        return 0;\n      }\n    }\n  },\n  watch: {\n    mode() {\n      this.pos = 0;\n      this.updateTextArray();\n      this.emitUpdateUserData();\n    },\n    pos(value) {\n      this.$emit(\"position-update\", {\n        pos: value,\n        paragraph: this.paragraph\n      });\n    },\n    state(value) {\n      if (value === \"started\") {\n        this.startTime = new Date();\n        this.updateTimeIntervalId = setInterval(() => {\n          this.updateTime();\n        }, 500);\n      } else {\n        clearInterval(this.updateTimeIntervalId);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.example > .letter.good {\n  color: var(--correct-char-color);\n}\n\n.example > .letter.bad {\n  text-decoration: underline red;\n  color: red;\n}\n\n.example > .letter.current {\n  text-decoration: underline;\n}\n\n.example > .letter.empty {\n  color: black;\n}\n\n.info {\n  margin-bottom: 20px;\n}\n</style>\n","<template>\n  <div\n    contenteditable=\"true\"\n    class=\"g-typing\"\n    ref=\"editable\"\n    @input=\"placeChanged\"\n    @keydown=\"filterKeypress\"\n    @mousedown=\"filterMouse\"\n    onselect=\"return false;\"\n    oncut=\"return false;\"\n    onpaste=\"return false;\"\n  ></div>\n</template>\n\n<script>\nimport {placeCaretAtEnd} from \"@/lib/utils\";\n\nexport default {\n  name: \"KeygetterVisible\",\n  props: {\n    finished: Boolean,\n    clearHook: Number\n  },\n  emits: [\n    \"add-letter\",\n    \"remove-letter\"\n  ],\n  methods: {\n    filterMouse(event) {\n      if (!this.finished) {\n        event.target.focus();\n        placeCaretAtEnd(this.$refs.editable);\n      }\n      event.preventDefault();\n    },\n    filterKeypress(event) {\n      if (this.finished) {\n        event.preventDefault();\n      } else if ([\n        \"ArrowRight\",\n        \"ArrowLeft\"\n      ].includes(event.key)) {\n        event.preventDefault();\n      } else if ((event.ctrlKey || event.metaKey) && [\"c\", \"v\", \"a\"].includes(event.key)) {\n        event.preventDefault();\n      }\n    },\n    placeChanged(event) {\n      if (event.inputType === \"insertText\") {\n        this.$emit(\"add-letter\", event.data);\n      } else if (event.inputType === \"insertParagraph\") {\n        this.$emit(\"add-letter\", \"\\n\");\n      } else if (event.inputType === \"deleteContentBackward\") {\n        this.$emit(\"remove-letter\");\n      }\n    },\n  },\n  watch: {\n    clearHook() {\n      this.$refs.editable.innerText = \"\";\n    }\n  }\n};\n</script>","const LETTERS_IN_WORD = 5;\n\nexport { LETTERS_IN_WORD };","import {LETTERS_IN_WORD} from \"@/lib/constants\";\n\nexport function findParent(scheme, id) {\n  for (let i = 0; i < scheme.items.length; i++) {\n    if (scheme.items[i].type === \"set\") {\n      let res = findParent(scheme.items[i], id);\n      if (res) {\n        return res;\n      }\n    } else {\n      if (scheme.items[i].id === id) {\n        return {\n          parent: scheme,\n          index: i\n        };\n      }\n    }\n  }\n  return false;\n}\n\nexport function placeCaretAtEnd(el) {\n  el.focus();\n  if (typeof window.getSelection != \"undefined\"\n          && typeof document.createRange != \"undefined\") {\n      const range = document.createRange();\n      range.selectNodeContents(el);\n      range.collapse(false);\n      const sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n  } else if (typeof document.body.createTextRange != \"undefined\") {\n      const textRange = document.body.createTextRange();\n      textRange.moveToElementText(el);\n      textRange.collapse(false);\n      textRange.select();\n  }\n}\n\nexport function getWPM(totalMs, totalLetters) {\n  if (totalMs !== 0) {\n    return (totalLetters / LETTERS_IN_WORD) / (totalMs / 1000 / 60);\n  } else {\n    return 0;\n  }\n}\n\nexport function randomName() {\n  let length = 10;\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}","import { render } from \"./KeygetterVisible.vue?vue&type=template&id=7c2fd049\"\nimport script from \"./KeygetterVisible.vue?vue&type=script&lang=js\"\nexport * from \"./KeygetterVisible.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n<div></div>\n</template>\n\n<script>\nexport default {\n  name: \"KeygetterHidden\",\n  data() {\n    return {\n      listener: (event) => {\n        if (event.key === \"Enter\") {\n          this.$emit(\"add-letter\", \"\\n\");\n        } else if (event.key === \"Backspace\") {\n          this.$emit(\"remove-letter\");\n          event.preventDefault();\n        } else if (event.key.length === 1) {\n          this.$emit(\"add-letter\", event.key);\n        }\n      }\n    };\n  },\n  emits: [\n    \"add-letter\",\n    \"remove-letter\"\n  ],\n  mounted() {\n    document.addEventListener(\n      \"keydown\",\n      this.listener,\n      false\n    );\n  },\n  unmounted() {\n    document.removeEventListener(\n      \"keydown\",\n      this.listener,\n      false\n    );\n  }\n};\n</script>","import { render } from \"./KeygetterHidden.vue?vue&type=template&id=bd6ace5a\"\nimport script from \"./KeygetterHidden.vue?vue&type=script&lang=js\"\nexport * from \"./KeygetterHidden.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Typer.vue?vue&type=template&id=55d0f4ae&scoped=true\"\nimport script from \"./Typer.vue?vue&type=script&lang=js\"\nexport * from \"./Typer.vue?vue&type=script&lang=js\"\n\nimport \"./Typer.vue?vue&type=style&index=0&id=55d0f4ae&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-55d0f4ae\"\n\nexport default script","import { render } from \"./TyperMenu.vue?vue&type=template&id=0f178bc2&scoped=true\"\nimport script from \"./TyperMenu.vue?vue&type=script&lang=js\"\nexport * from \"./TyperMenu.vue?vue&type=script&lang=js\"\n\nimport \"./TyperMenu.vue?vue&type=style&index=0&id=0f178bc2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0f178bc2\"\n\nexport default script","<template>\n  <div>\n    <div class=\"continue-typing\">\n      <router-link class=\"g-text-button continue-typing\" v-if=\"$store.state.currentBook\"\n                   :to=\"{ name: 'TyperMenu', params: { id: $store.state.currentBook.id } }\">Continue typing\n        ({{ $store.state.currentBook.title }})\n      </router-link>\n    </div>\n    <div v-if=\"$store.state.scheme\">\n      <SchemeEntry v-for=\"set in $store.state.scheme.items\" :set=\"set\" :key=\"set.title\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SchemeEntry from \"@/components/SchemeEntry\";\n\nexport default {\n  name: \"BookSelect\",\n  data() {\n    return {};\n  },\n  components: {\n    SchemeEntry\n  }\n};\n</script>\n\n<style scoped>\n.continue-typing {\n  font-size: 1.3em;\n  margin-bottom: 20px;\n}\n</style>\n","<template>\n  <div>\n    <div v-if=\"set.type === 'set'\">\n      <div>{{ set.title }}</div>\n      <ol v-for=\"element in set.items\" :key=\"element.title\">\n        <SchemeEntry :set=\"element\" />\n      </ol>\n    </div>\n    <div v-else>\n      <router-link :class=\"{ 'final-entry': true, 'g-text-button': true, 'finished': $store.state.db.getBook(set.id).userData.finished }\" :to=\"{ name: 'TyperMenu', params: { id: set.id } }\">{{ set.title }}</router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SchemeEntry\",\n  props: {\n    set: Object\n  }\n};\n</script>\n\n<style scoped>\n.finished:before {\n  content: \"✔️\" !important;\n}\n</style>\n","import { render } from \"./SchemeEntry.vue?vue&type=template&id=8203cee2&scoped=true\"\nimport script from \"./SchemeEntry.vue?vue&type=script&lang=js\"\nexport * from \"./SchemeEntry.vue?vue&type=script&lang=js\"\n\nimport \"./SchemeEntry.vue?vue&type=style&index=0&id=8203cee2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-8203cee2\"\n\nexport default script","import { render } from \"./BookSelect.vue?vue&type=template&id=74db4fff&scoped=true\"\nimport script from \"./BookSelect.vue?vue&type=script&lang=js\"\nexport * from \"./BookSelect.vue?vue&type=script&lang=js\"\n\nimport \"./BookSelect.vue?vue&type=style&index=0&id=74db4fff&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-74db4fff\"\n\nexport default script","<template>\n  <div>\n    <div v-if=\"isState('loading')\">\n      Connection to server...\n    </div>\n    <div v-else-if=\"isState('error')\">\n      Error: {{ error }}\n    </div>\n    <div v-else-if=\"isState('new-session')\">\n      <div class=\"g-header\">New session</div>\n      <div class=\"g-subtitle\">Random text mode</div>\n      <div class=\"g-button\" @click=\"requestNewSession(null)\">create</div>\n      <div class=\"g-subtitle\">Custom text mode</div>\n      <div class=\"g-label\">your text</div>\n      <div class=\"g-typing\" contenteditable=\"true\" ref=\"userText\"\n           @input=\"userCustomText = $refs.userText.innerText\"></div>\n      <div :class=\"{ 'g-button': true, disabled: userCustomText.length < 5 || userCustomText.length > 2000 }\"\n           @click=\"requestNewSession($refs.userText.innerText)\">create\n      </div>\n    </div>\n    <div v-else>\n      <!--      State: {{ state }}<br>-->\n      <div>\n        <div class=\"g-header\">{{ sessionInfo.title }} {{ sessionInfo.mode === \"random\" ? \"🎲\" : \"👆\" }}</div>\n        <div class=\"g-subtitle\" v-if=\"sessionInfo.author\">{{ sessionInfo.author }}</div>\n        <div class=\"info\">\n\n          <div>\n          <div v-if=\"isState('preparing-to-start')\" class=\"start-button g-button\">\n            <div v-if=\"isState('preparing-to-start-server-wait')\">\n              Game will start NOW!\n            </div>\n            <div v-else>\n              Starting in {{ prepareStartCountdown }}...\n            </div>\n          </div>\n\n          <div v-if=\"isAdmin && isState('not-started')\"\n               class=\"g-button start-button\"\n               @click=\"sendPrepareStart\">\n            Start?\n          </div>\n          </div>\n          players:\n          <span v-for=\"(playerId, i) in Object.keys(sessionInfo.playersPos)\" :key=\"playerId\"\n                :class=\"{current: playerId === userId}\">\n             {{ i !== 0 ? \", \" : \"\" }} {{ sessionInfo.id2username[playerId] }}\n          </span>\n        </div>\n\n        <OnlineTyper\n          @finish=\"finishBefore\"\n          @position-update=\"sendPlayerPos\"\n          :userId=\"userId\"\n          :id2username=\"sessionInfo.id2username\"\n          :dummy=\"isState('not-started')\"\n          :blocked=\"!isState('started')\"\n          :text=\"text\"\n          :user-data=\"{}\"\n          :players-pos=\"(isState('started') || isState('finished')) ? playersPos : {}\"\n        />\n\n        <div v-if=\"sessionInfo.winners.length !== 0\">\n          Results:\n          <ol class=\"results\">\n            <li v-for=\"(winner,i) in sessionInfo.winners\" :key=\"winner.userId\" :class=\"{ winner: i === 0}\">\n              <!--              {{ winner }}-->\n              <span style=\"font-weight: 400;\">{{ winner.username }}</span> finished with {{\n                winner.results.totalErrors\n              }}\n              errors out of {{ winner.results.totalLetters }}\n              letters ({{ (winner.results.totalErrors * 100 / winner.results.totalLetters).toFixed(2) }}%).\n              WPM: {{ winner.results.wpmWithFine.toFixed(0) }}.\n            </li>\n          </ol>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {io} from \"socket.io-client\";\n\nimport OnlineTyper from \"@/components/OnlineTyper\";\n\n// state\n// new-session\n// not-started\n// preparing-to-start\n// preparing-to-start-server-wait\n// started\n// finished-before\n// finished-all\n\nconst startCountdown = 3;\n\nexport default {\n  name: \"OnlineTyperMenu\",\n  components: {\n    OnlineTyper\n  },\n  data() {\n    return {\n      sessionId: \"\",\n      socket: io(process.env.VUE_APP_SOCKETIO_URL),\n      text: null,\n      userId: null,\n      isAdmin: null,\n      state: \"loading\",\n      sessionInfo: null,\n      prepareStartCountdown: startCountdown,\n      playersPos: {},\n      error: \"\",\n      userCustomText: \"\"\n    };\n  },\n  methods: {\n    isState(state) {\n      return this.state.startsWith(state);\n    },\n\n    // Socket emitters\n    requestNewSession(text) {\n      this.socket.emit(\"new-session\", text, (response) => {\n        this.$router.push({\n          name: \"OnlineTyperMenu\",\n          params: {id: response.sessionId}\n        });\n      });\n    },\n    requestInitiation() {\n      this.socket.emit(\"init\", this.sessionId, this.$store.state.settings.username, (response) => {\n        console.log(\"sessionInfo\", response);\n        if (response.error) {\n          this.state = \"error\";\n          this.error = response.error;\n          return;\n        }\n        this.sessionInfo = response;\n        this.userId = response.userId;\n        this.isAdmin = response.isAdmin;\n        this.state = response.state;\n        this.init();\n      });\n    },\n    sendPrepareStart() {\n      this.socket.emit(\"prepare-start\");\n      this.prepareStart();\n    },\n    sendPlayerPos(positionData) {\n      this.socket.emit(\"new-position\", [positionData.pos, positionData.paragraph]);\n    },\n    sendFinishEvent(stats) {\n      console.log(\"you finished\", stats);\n      this.socket.emit(\"finished\", stats);\n    },\n\n    // Socket listeners\n    init() {\n      this.text = this.sessionInfo.text;\n    },\n    update(data) {\n      if (data.sessionInfo) {\n        this.sessionInfo = data.sessionInfo;\n      }\n\n      this.playersPos = {};\n      for (let p in data.playersPos) {\n        if (p !== this.userId) {\n          this.playersPos[p] = data.playersPos[p];\n        }\n      }\n    },\n    prepareStart() {\n      this.state = \"preparing-to-start\";\n      let intervalCode = setInterval(() => {\n        this.prepareStartCountdown--;\n        if (this.prepareStartCountdown === 0) {\n          clearInterval(intervalCode);\n          this.prepareStartCountdown = startCountdown;\n          if (this.state === \"preparing-to-start\") {\n            this.state = \"preparing-to-start-server-wait\";\n          }\n        }\n      }, 1000);\n    },\n    start() {\n      this.state = \"started\";\n\n      this.prepareStartCountdown = 0;\n\n      // TODO: remove pseudo players in prod version\n      // let ppos = 0;\n      // let ppar = 0;\n      // let pseudoPlayerIntervalId = setInterval(() => {\n      //   this.update({\n      //     state: \"started\",\n      //     playersPos: {\n      //       [ppar]: {\n      //         2: ppos,\n      //         3: (ppos - 1) % this.text[ppar].length\n      //       }\n      //     }\n      //   });\n      //\n      //   ppos++;\n      //   if (ppos === this.text[ppar].length) {\n      //     ppos = 0;\n      //     ppar++;\n      //     if (ppar === this.text.length) {\n      //       this.finishAll({\n      //         you_are_looser: true\n      //       });\n      //       clearInterval(pseudoPlayerIntervalId);\n      //     }\n      //   }\n      // }, 50);\n      // setTimeout(() => {\n      //   clearInterval(pseudoPlayerIntervalId);\n      //   this.finish({});\n      // }, 10000);\n    },\n    finishBefore(stats) {\n      this.state = \"finished\";\n      this.sendFinishEvent(stats);\n    }\n  },\n  created() {\n    this.sessionId = this.$route.params.id;\n    this.socket.on(\"connect\", () => {\n      if (this.sessionId === \"new\") {\n        this.state = \"new-session\";\n      } else {\n        this.requestInitiation();\n        this.socket.on(\"update\", this.update);\n        this.socket.on(\"prepare-start\", this.prepareStart);\n        this.socket.on(\"start\", this.start);\n      }\n    });\n  },\n  unmounted() {\n    this.socket.disconnect();\n  },\n  computed: {\n    playersList() {\n      let res = [];\n      for (let p in this.sessionInfo.playersPos) {\n        res.push(this.sessionInfo.id2username[p]);\n      }\n      return res;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.winner:before {\n  content: \"🥇\";\n}\n\n.current {\n  font-weight: 400;\n}\n\n.results {\n  margin-top: 10px;\n}\n\n.info {\n  margin-bottom: 20px;\n}\n.start-button {\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n</style>","<template>\n  <div>\n    <div class=\"example g-typing\" v-if=\"dummy\">\n      <span v-for=\"(letterEntry, i) in textArray\" :key=\"i\">\n        <span\n          v-html=\"convertDummy(convertLetter(letterEntry.letter))\">\n        </span>\n      </span>\n    </div>\n    <div class=\"example g-typing\" v-else>\n      <span v-for=\"(letterEntry, i) in textArray\" :key=\"i\">\n        <span v-if=\"player = getPlayerByPos(i)\">\n          <span\n            :data-text=\"player ? player : null\"\n            :class=\"{\n              ['player p' + player + ' ' + getLetterOffsetClass(letterEntry.letter)]: player\n          }\">\n          </span>\n        </span>\n        <span\n          :class=\"{\n              letter: true,\n              good: letterEntry.state === '+',\n              bad: letterEntry.state === '-',\n              current: letterEntry.state === 'c',\n            }\"\n          v-html=\"convertLetter(letterEntry.letter)\">\n        </span>\n      </span>\n    </div>\n\n    <div v-if=\"!blocked\">\n      <KeygetterVisible\n        v-if=\"mode === 'Separate window'\"\n        clearHook=\"clearHook\"\n        @add-letter=\"addLetter\"\n        @remove-letter=\"removeLetter\"\n        :finished=\"blocked\"\n      />\n      <KeygetterHidden\n        v-if=\"mode === 'In place'\"\n        @add-letter=\"addLetter\"\n        @remove-letter=\"removeLetter\"\n        :finished=\"blocked\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Typer from \"@/components/Typer\";\n\nexport default {\n  mixins: [Typer],\n  props: {\n    playersPos: Object,\n    dummy: Boolean,\n    blocked: Boolean,\n    userId: String,\n    id2username: Object\n  },\n  watch: {\n    blocked(value) {\n      if (!value) {\n        this.state = \"started\";\n      }\n    }\n  },\n  methods: {\n    convertDummy(letter) {\n      if (letter === \" \") {\n        return letter;\n      }\n      if (letter === \"&para;\\n\") {\n        return \"\\n\";\n      }\n      return \"&bull;\";\n    },\n    getLetterOffsetClass(letter) {\n      if (letter === \"й\") {\n        return \"above-lower\";\n      }\n      if (letter === \"Й\") {\n        return \"above-upper\";\n      }\n      if (\",._\".split(\"\").includes(letter)) {\n        return \"punctuation\";\n      }\n      if (\" \" === letter) {\n        return \"whitespace\";\n      }\n      if (letter.toLowerCase() === letter) {\n        return \"lower\";\n      }\n      if (letter.toUpperCase() === letter) {\n        return \"upper\";\n      }\n    },\n    getPlayerByPos(pos) {\n      for (let player in this.playersPos) {\n        if (player !== this.userId) {\n          if (this.playersPos[player][0] === pos && this.playersPos[player][1] === this.paragraph) {\n            return this.id2username[player].slice(0, 2).toUpperCase();\n          }\n        }\n      }\n      return undefined;\n    }\n  },\n  name: \"OnlineTyper\"\n};\n</script>\n\n<style scoped>\n.letter.good {\n  color: var(--correct-char-color);\n}\n\n.letter.bad {\n  text-decoration: underline red;\n  color: red;\n}\n\n.letter.current {\n  text-decoration: underline;\n}\n\n.letter.empty {\n  color: black;\n}\n\n/*.letter:after {*/\n/*  !*display: none;*!*/\n/*  position: absolute;*/\n/*  !*font-size: 0.4em;*!*/\n/*  !*align-content: center;*!*/\n/*  left: 0.15em;*/\n/*  !*content: \"&\";*!*/\n/*  top: -0.6em;*/\n/*  !*color: black;*!*/\n/*}*/\n\n.player, .letter {\n  position: relative;\n}\n\n.player:after {\n  display: block;\n  position: absolute;\n  font-size: 0.4em;\n  align-content: center;\n  left: 0.15em;\n  content: attr(data-text);\n  top: -0.6em;\n  color: black;\n}\n\n.player.upper:after {\n  top: -0.7em;\n}\n\n.player.above-upper:after {\n  top: -0.75em;\n}\n\n.player.lower:after {\n  top: -0.4em;\n}\n\n.player.above-lower:after {\n  top: -0.65em;\n}\n\n.player.punctuation:after {\n  top: 0.2em;\n}\n\n.player.whitespace:after {\n  top: 1em;\n}\n</style>","import { render } from \"./OnlineTyper.vue?vue&type=template&id=1f0887b0&scoped=true\"\nimport script from \"./OnlineTyper.vue?vue&type=script&lang=js\"\nexport * from \"./OnlineTyper.vue?vue&type=script&lang=js\"\n\nimport \"./OnlineTyper.vue?vue&type=style&index=0&id=1f0887b0&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1f0887b0\"\n\nexport default script","import { render } from \"./OnlineTyperMenu.vue?vue&type=template&id=7fb9610e&scoped=true\"\nimport script from \"./OnlineTyperMenu.vue?vue&type=script&lang=js\"\nexport * from \"./OnlineTyperMenu.vue?vue&type=script&lang=js\"\n\nimport \"./OnlineTyperMenu.vue?vue&type=style&index=0&id=7fb9610e&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-7fb9610e\"\n\nexport default script","<template>\n<div>\n  <div class=\"g-header\">About</div>\n  <p>\n    Pechatay (rus. \"Печатай\", \"type\" in imperative form) &ndash; it's a single page web application which implements\n    simple typing trainer.\n  </p>\n\n  <div class=\"g-header\">F.A.Q.</div>\n\n  <p class=\"question\">\n    Why time stats are always hidden?\n  </p>\n  <p class=\"answer\">\n    I think displaying current typing speed confuses the user and decreases performance, so I made the stats hidden by default.\n    Nonetheless, you can always show them by clicking on the inscription.\n  </p>\n\n  <p class=\"question\">\n    What is WPM?\n  </p>\n  <p class=\"answer\">\n    WPM stands for words per minute, where each word is exactly 5 chars (including whitespace and punctuation).\n  </p>\n\n  <p class=\"question\">\n    Where my results and custom books are saved?\n  </p>\n  <p class=\"answer\">\n    All your stats and books are saved locally, so don't worry about losing progress.\n  </p>\n\n  <p class=\"question\">\n    What is \"Fight Online\"?\n  </p>\n  <p class=\"answer\">\n    This is a competitive trainer mode where you can type the same text with your friends\n    in real-time sync mode over the internet.\n  </p>\n\n  <div class=\"g-header\">Other</div>\n  <p>\n    Made by <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/zpix1/\">@zpix</a> in 2020,\n    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/zpix1/pechatay\">GitHub repo</a>.\n  </p>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"About\"\n};\n</script>\n\n<style scoped>\n.question {\n  font-weight: 400;\n  font-style: italic;\n}\n</style>","import { render } from \"./About.vue?vue&type=template&id=45f3ea25&scoped=true\"\nimport script from \"./About.vue?vue&type=script&lang=js\"\nexport * from \"./About.vue?vue&type=script&lang=js\"\n\nimport \"./About.vue?vue&type=style&index=0&id=45f3ea25&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-45f3ea25\"\n\nexport default script","import {createWebHashHistory, createRouter} from \"vue-router\";\nimport TyperMenu from \"@/views/TyperMenu.vue\";\nimport BookSelect from \"@/views/BookSelect.vue\";\nimport OnlineTyperMenu from \"@/views/OnlineTyperMenu\";\nimport About from \"@/views/About\";\nimport {publicPath} from \"@/../vue.config\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"BookSelect\",\n    component: BookSelect,\n  },\n  {\n    path: \"/typer/:id\",\n    name: \"TyperMenu\",\n    component: TyperMenu,\n    props: true\n  },\n  {\n    path: \"/fight/:id\",\n    name: \"OnlineTyperMenu\",\n    component: OnlineTyperMenu,\n    props: true\n  },\n  {\n    path: \"/about\",\n    name: \"About\",\n    component: About\n  },\n  {\n    path: \"/:pathMatch(.*)*\",\n    redirect: \"/\"\n  }\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(publicPath),\n  routes,\n});\n\nexport default router;","import {publicPath} from \"@/../vue.config\";\nclass Database {\n  static dbName = \"pechatayDB\";\n  static localStorageSchemeKey = \"pechatayBooksScheme\";\n  static localStorageSettingsKeyPrefix = \"pechataySettings_\";\n  static localStorageBookKeyPrefix = \"pechatayBook_\";\n\n  static schemeVersion = 1;\n\n  constructor() {\n    console.log(\"DB Created\");\n    this.db = null;\n    this.scheme = null;\n    this.id2book = {};\n  }\n\n  generateId2book(scheme) {\n    if (scheme.type === \"set\") {\n      for (let i = 0; i < scheme.items.length; i++) {\n        this.generateId2book(scheme.items[i]);\n      }\n    } else {\n      let userBook = this.getBook(scheme.id);\n      this.setBook(scheme.id, {\n        ...scheme,\n        userData: (userBook ? userBook.userData || {} : {})\n      });\n    }\n  }\n\n  init() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        fetch(publicPath + \"scheme.json\")\n          .then(r => r.json())\n          .then(json => {\n            this.scheme = json;\n\n            let request = indexedDB.open(Database.dbName, Database.version);\n\n            request.onerror = (event) => {\n              console.error(\"IndexDB creation error\", event);\n              alert(\"IndexDB error... Maybe your browser is too old?\");\n            };\n\n            request.onsuccess = (event) => {\n              this.db = event.target.result;\n              if (localStorage.getItem(Database.localStorageSchemeKey) !== JSON.stringify(json)) {\n                this.generateId2book(json);\n                console.log(\"pechatayBooksScheme updated, loading texts json\");\n                fetch(publicPath + \"texts.json\")\n                  .then(r => r.json())\n                  .then(json => {\n                    for (let i = 0; i < json.length; i++) {\n                      const {text, ...other} = json[i];\n                      let tr = this.db.transaction(\"bookTexts\", \"readwrite\");\n                      let bookTexts = tr.objectStore(\"bookTexts\");\n                      bookTexts.put({\n                        id: other.id,\n                        text: text\n                      });\n                    }\n                    resolve();\n                  }, reject);\n                localStorage.setItem(Database.localStorageSchemeKey, JSON.stringify(json));\n              } else {\n                resolve();\n              }\n            };\n\n            request.onupgradeneeded = (event) => {\n              let db = event.target.result;\n              if (!db.objectStoreNames.contains(\"bookTexts\")) {\n                db.createObjectStore(\"bookTexts\", {keyPath: \"id\"});\n              }\n            };\n          });\n      }, 0);\n    });\n  }\n\n  getScheme() {\n    return this.scheme;\n  }\n\n  getSettingsValue(key) {\n    return JSON.parse(localStorage.getItem(Database.localStorageSettingsKeyPrefix + key));\n  }\n\n  setSettingsValue(key, value) {\n    return localStorage.setItem(Database.localStorageSettingsKeyPrefix + key, JSON.stringify(value));\n  }\n\n  getBook(id) {\n    return JSON.parse(localStorage.getItem(Database.localStorageBookKeyPrefix + id));\n    // return this.id2book[id] || null;\n    // return new Promise((resolve, reject) => {\n    //   let tr = this.db.transaction(['texts'], 'readonly');\n    //   let texts = tr.objectStore('texts');\n    //   let request = texts.get(id);\n\n    //   request.onerror = reject;\n    //   request.onsuccess = () => resolve(request.result);\n    // });\n  }\n\n  setBook(id, book) {\n    localStorage.setItem(Database.localStorageBookKeyPrefix + id, JSON.stringify(book));\n  }\n\n  // saveId2book() {\n  //   localStorage.setItem(Database.localStorageId2bookKey, JSON.stringify(this.id2book));\n  // }\n\n  // setBookUserData(id, userData) {\n  //   this.id2book[id].userData = userData;\n  // }\n\n  async getBookText(id) {\n    return new Promise((resolve, reject) => {\n      let tr = this.db.transaction([\"bookTexts\"], \"readonly\");\n      let books = tr.objectStore(\"bookTexts\");\n      let request = books.get(id);\n\n      request.onerror = reject;\n      request.onsuccess = () => {\n        if (request.result) {\n          resolve(request.result.text);\n        } else {\n          reject();\n        }\n      };\n    });\n  }\n}\n\nexport default Database;","import {createApp} from \"vue\";\nimport {createStore} from \"vuex\";\n\nimport App from \"@/App.vue\";\nimport router from \"@/router\";\nimport Database from \"@/lib/database\";\n\nimport {randomName} from \"@/lib/utils\";\n\nlet app = createApp(App);\n\nconst store = createStore({\n  state() {\n    return {\n      loading: false,\n      db: new Database(),\n      currentBook: null,\n      scheme: null,\n      settings: {},\n      settingsTemplate: {\n        font: [\"Roboto Mono\", \"Source Code Pro\", \"IBM Plex Mono\", \"JetBrains Mono\"],\n        theme: [\"Light\", \"Dark\"],\n        typeMode: [\"In place\", \"Separate window\"],\n        username: randomName()\n      }\n    };\n  },\n  mutations: {\n    init(state) {\n      state.loading = true;\n      state.db.init().then(() => {\n        state.loading = false;\n        state.scheme = state.db.getScheme();\n      });\n\n      state.currentBook = state.db.getSettingsValue(\"currentBook\");\n      for (let k in state.settingsTemplate) {\n        const userRes = state.db.getSettingsValue(\"settings_\" + k);\n        if (Array.isArray(state.settingsTemplate[k])) {\n          if (state.settingsTemplate[k].includes(userRes)) {\n            state.settings[k] = userRes;\n          } else {\n            state.settings[k] = state.settingsTemplate[k][0];\n          }\n        } else {\n          if (userRes !== null) {\n            state.settings[k] = userRes;\n          } else {\n            state.settings[k] = state.settingsTemplate[k];\n          }\n        }\n      }\n    },\n    setCurrentBook(state, book) {\n      state.currentBook = book;\n      state.db.setSettingsValue(\"currentBook\", book);\n    },\n    setSetting(state, {setting, value}) {\n      state.settings[setting] = value;\n      state.db.setSettingsValue(\"settings_\" + setting, value);\n    }\n  }\n});\n\napp\n  .use(router)\n  .use(store)\n  .mount(\"#app\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Settings.vue?vue&type=style&index=0&id=5bc77e7d&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=1&id=f60b4cd4&scoped=true&lang=css\"","module.exports = {\n    publicPath: process.env.NODE_ENV === \"production\"\n        ? \"/pechatay/\"\n        : \"/\"\n};","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BookSelect.vue?vue&type=style&index=0&id=74db4fff&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TyperMenu.vue?vue&type=style&index=0&id=0f178bc2&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Typer.vue?vue&type=style&index=0&id=55d0f4ae&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=f60b4cd4&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OnlineTyper.vue?vue&type=style&index=0&id=1f0887b0&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./About.vue?vue&type=style&index=0&id=45f3ea25&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OnlineTyperMenu.vue?vue&type=style&index=0&id=7fb9610e&scoped=true&lang=css\""],"sourceRoot":""}